(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{101:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return b})),a.d(t,"metadata",(function(){return i})),a.d(t,"toc",(function(){return o})),a.d(t,"default",(function(){return h}));var n=a(3),r=a(7),c=(a(0),a(108)),b={slug:"2021-04-05-db-migration-on-infrastructure-layer-project",title:"\u3010.NET\u3001C#\u3011\u8907\u6570\u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3067DB\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30d5\u30e9\u5c64\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u751f\u6210\u3059\u308b",author:"sugu-sano",author_title:"web application developper",author_url:"https://github.com/sugu-sano",author_image_url:"https://avatars.githubusercontent.com/u/70303693?s=60&v=4",tags:[".NET",".NET Core","db migration","C#","EntityFramework Core"]},i={permalink:"/dev-blog/blog/2021-04-05-db-migration-on-infrastructure-layer-project",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/blog/blog/2021-04-05-db-migration-on-infrastructure-layer-project.md",source:"@site/blog/2021-04-05-db-migration-on-infrastructure-layer-project.md",description:"\u304d\u3063\u304b\u3051",date:"2021-04-05T00:00:00.000Z",tags:[{label:".NET",permalink:"/dev-blog/blog/tags/net"},{label:".NET Core",permalink:"/dev-blog/blog/tags/net-core"},{label:"db migration",permalink:"/dev-blog/blog/tags/db-migration"},{label:"C#",permalink:"/dev-blog/blog/tags/c"},{label:"EntityFramework Core",permalink:"/dev-blog/blog/tags/entity-framework-core"}],title:"\u3010.NET\u3001C#\u3011\u8907\u6570\u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3067DB\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30d5\u30e9\u5c64\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u751f\u6210\u3059\u308b",readingTime:5.86,truncated:!0,nextItem:{title:"Docusaurus \u3067\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30cf\u30a4\u30e9\u30a4\u30c8\u5bfe\u5fdc\u8a00\u8a9e\u3092\u8ffd\u52a0\u3059\u308b\u65b9\u6cd5",permalink:"/dev-blog/blog/2021-03-17-add-syntax-highlighting-theme-in-docusaurus"}},o=[{value:"\u304d\u3063\u304b\u3051",id:"\u304d\u3063\u304b\u3051",children:[]}],l={toc:o};function h(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(c.b)("wrapper",Object(n.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(c.b)("svg",{height:"256",viewBox:"0 0 64 64",width:"256",xmlns:"http://www.w3.org/2000/svg"},Object(c.b)("g",{id:"Layer_34","data-name":"Layer 34"},Object(c.b)("g",{id:"database_server","data-name":"database server"},Object(c.b)("rect",{fill:"#57a4ff",height:"12",rx:"2",width:"40",x:"3",y:"19"}),Object(c.b)("path",{d:"m43 21v8a2.006 2.006 0 0 1 -2 2h-4a2.006 2.006 0 0 0 2-2v-8a2.006 2.006 0 0 0 -2-2h4a2.006 2.006 0 0 1 2 2z",fill:"#2488ff"}),Object(c.b)("path",{d:"m33 31h6v4h-6z",fill:"#acabb1"}),Object(c.b)("path",{d:"m33 15h6v4h-6z",fill:"#acabb1"}),Object(c.b)("path",{d:"m36 15h3v4h-3z",fill:"#898890"}),Object(c.b)("path",{d:"m36 31h3v4h-3z",fill:"#898890"}),Object(c.b)("rect",{fill:"#57a4ff",height:"12",rx:"2",width:"40",x:"3",y:"35"}),Object(c.b)("path",{d:"m43 37v8a2.006 2.006 0 0 1 -2 2h-4a2.006 2.006 0 0 0 2-2v-8a2.006 2.006 0 0 0 -2-2h4a2.006 2.006 0 0 1 2 2z",fill:"#2488ff"}),Object(c.b)("path",{d:"m15 39h4v4h-4z",fill:"#00b6bd"}),Object(c.b)("path",{d:"m15 23h4v4h-4z",fill:"#00b6bd"}),Object(c.b)("rect",{fill:"#57a4ff",height:"12",rx:"2",width:"40",x:"3",y:"3"}),Object(c.b)("path",{d:"m43 5v8a2.006 2.006 0 0 1 -2 2h-4a2.006 2.006 0 0 0 2-2v-8a2.006 2.006 0 0 0 -2-2h4a2.006 2.006 0 0 1 2 2z",fill:"#2488ff"}),Object(c.b)("path",{d:"m15 7h4v4h-4z",fill:"#00b6bd"}),Object(c.b)("path",{d:"m7 31h6v4h-6z",fill:"#acabb1"}),Object(c.b)("path",{d:"m7 15h6v4h-6z",fill:"#acabb1"}),Object(c.b)("path",{d:"m10 15h3v4h-3z",fill:"#898890"}),Object(c.b)("path",{d:"m10 31h3v4h-3z",fill:"#898890"}),Object(c.b)("path",{d:"m7 39h4v4h-4z",fill:"#ff7956"}),Object(c.b)("path",{d:"m7 23h4v4h-4z",fill:"#ff7956"}),Object(c.b)("path",{d:"m7 7h4v4h-4z",fill:"#ff7956"}),Object(c.b)("path",{d:"m61 46v10c0 2.76-8.06 5-18 5s-18-2.24-18-5v-10c0 2.76 8.06 5 18 5s18-2.24 18-5z",fill:"#ffde55"}),Object(c.b)("path",{d:"m61 36v10c0 2.76-8.06 5-18 5s-18-2.24-18-5v-10c0 2.76 8.06 5 18 5s18-2.24 18-5z",fill:"#ffde55"}),Object(c.b)("path",{d:"m61 26v10c0 2.76-8.06 5-18 5s-18-2.24-18-5v-10c0 2.76 8.06 5 18 5s18-2.24 18-5z",fill:"#ffde55"}),Object(c.b)("g",{fill:"#ffcd00"},Object(c.b)("ellipse",{cx:"43",cy:"26",rx:"18",ry:"5"}),Object(c.b)("path",{d:"m61 46v10c0 2.76-8.06 5-18 5-.68 0-1.34-.01-2-.04 9-.27 16-2.39 16-4.96v-6.86c2.5-.86 4-1.95 4-3.14z"}),Object(c.b)("path",{d:"m61 36v10c0 1.19-1.5 2.28-4 3.14a46.109 46.109 0 0 1 -14 1.86c-.68 0-1.34-.01-2-.04 9-.27 16-2.39 16-4.96v-6.86c2.5-.86 4-1.95 4-3.14z"}),Object(c.b)("path",{d:"m61 26v10c0 1.19-1.5 2.28-4 3.14a46.109 46.109 0 0 1 -14 1.86c-.68 0-1.34-.01-2-.04 9-.27 16-2.39 16-4.96v-6.86c2.5-.86 4-1.95 4-3.14z"})),Object(c.b)("path",{d:"m61 26c0 1.19-1.5 2.28-4 3.14a46.109 46.109 0 0 1 -14 1.86c-.68 0-1.34-.01-2-.04 9-.27 16-2.39 16-4.96s-7-4.69-16-4.96c.66-.03 1.32-.04 2-.04 9.94 0 18 2.24 18 5z",fill:"#ebbf00"}),Object(c.b)("path",{d:"m57 46v3.14a46.109 46.109 0 0 1 -14 1.86c-.68 0-1.34-.01-2-.04 9-.27 16-2.39 16-4.96z",fill:"#ffde55"}),Object(c.b)("path",{d:"m57 36v3.14a46.109 46.109 0 0 1 -14 1.86c-.68 0-1.34-.01-2-.04 9-.27 16-2.39 16-4.96z",fill:"#ffde55"}),Object(c.b)("path",{d:"m43.82 20.01a2.986 2.986 0 0 0 -2.82-2.01h-1v-2h1a3.009 3.009 0 0 0 3-3v-8a3.009 3.009 0 0 0 -3-3h-36a3.009 3.009 0 0 0 -3 3v8a3.009 3.009 0 0 0 3 3h1v2h-1a3.009 3.009 0 0 0 -3 3v8a3.009 3.009 0 0 0 3 3h1v2h-1a3.009 3.009 0 0 0 -3 3v8a3.009 3.009 0 0 0 3 3h19v8c0 3.94 9.56 6 19 6s19-2.06 19-6v-30c0-3.83-9.01-5.87-18.18-5.99zm-38.82-6.01a1 1 0 0 1 -1-1v-8a1 1 0 0 1 1-1h36a1 1 0 0 1 1 1v8a1 1 0 0 1 -1 1zm33 2v2h-4v-2zm-6 0v2h-18v-2zm-20 0v2h-4v-2zm12 30h-19a1 1 0 0 1 -1-1v-8a1 1 0 0 1 1-1h19zm-16-12v-2h4v2zm16 0h-10v-2h10zm0-8v4h-19a1 1 0 0 1 -1-1v-8a1 1 0 0 1 1-1h36a.7.7 0 0 1 .14.03c-8.8.25-17.14 2.29-17.14 5.97zm36 30c0 1.36-6 4-17 4s-17-2.64-17-4v-7.18c3.29 2.09 10.16 3.18 17 3.18s13.71-1.09 17-3.18zm0-10c0 1.36-6 4-17 4s-17-2.64-17-4v-7.18c3.29 2.09 10.16 3.18 17 3.18s13.71-1.09 17-3.18zm0-10c0 1.36-6 4-17 4s-17-2.64-17-4v-7.18c3.29 2.09 10.16 3.18 17 3.18s13.71-1.09 17-3.18zm-17-6c-11 0-17-2.64-17-4s6-4 17-4 17 2.64 17 4-6 4-17 4z"}),Object(c.b)("path",{d:"m42 35h2v2h-2z"}),Object(c.b)("path",{d:"m42 46h2v2h-2z"}),Object(c.b)("path",{d:"m42 55h2v2h-2z"}),Object(c.b)("path",{d:"m11 22h-4a1 1 0 0 0 -1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0 -1-1zm-1 4h-2v-2h2z"}),Object(c.b)("path",{d:"m19 22h-4a1 1 0 0 0 -1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0 -1-1zm-1 4h-2v-2h2z"}),Object(c.b)("path",{d:"m11 6h-4a1 1 0 0 0 -1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0 -1-1zm-1 4h-2v-2h2z"}),Object(c.b)("path",{d:"m19 6h-4a1 1 0 0 0 -1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0 -1-1zm-1 4h-2v-2h2z"}),Object(c.b)("path",{d:"m22 6h14v2h-14z"}),Object(c.b)("path",{d:"m38 6h2v2h-2z"}),Object(c.b)("path",{d:"m22 10h14v2h-14z"}),Object(c.b)("path",{d:"m38 10h2v2h-2z"}),Object(c.b)("path",{d:"m11 38h-4a1 1 0 0 0 -1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0 -1-1zm-1 4h-2v-2h2z"}),Object(c.b)("path",{d:"m19 38h-4a1 1 0 0 0 -1 1v4a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-4a1 1 0 0 0 -1-1zm-1 4h-2v-2h2z"})))),Object(c.b)("h2",{id:"\u304d\u3063\u304b\u3051"},"\u304d\u3063\u304b\u3051"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"dotnet ef migrations"),"\u30b3\u30de\u30f3\u30c9\u3067\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\u969b\u306f\u3001DB \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092 DI \u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\u5b9f\u884c\u5f62\u5f0f\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002"),Object(c.b)("p",null,"\u3057\u304b\u3057\u3001\u4e0b\u8a18\u306e\u7528\u306b\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u69cb\u6210\u306e\u3088\u3046\u306b\u8907\u6570\u306e\u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\uff08",Object(c.b)("inlineCode",{parentName:"p"},"WebApi"),"\u3001",Object(c.b)("inlineCode",{parentName:"p"},"WebSite"),"\uff09\u304c\u3042\u308b\u5834\u5408\u3001",Object(c.b)("inlineCode",{parentName:"p"},"WebApi"),"\u3001",Object(c.b)("inlineCode",{parentName:"p"},"WebSite"),"\u306e\u3069\u3061\u3089\u304b\u3067\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3069\u3061\u3089\u304b\u7247\u65b9\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3060\u3051\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u306e\u306f\u9055\u548c\u611f\u304c\u3042\u308a\u307e\u3059\u3002"),Object(c.b)("pre",null,Object(c.b)("code",{parentName:"pre",className:"language-bash"},"$ tree .\n\u251c\u2500\u2500 ECommerceSample.sln\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 Application\n    \u2502\xa0\xa0 \u251c\u2500\u2500 Application.csproj\n    \u251c\u2500\u2500 Domain\n    \u2502\xa0\xa0 \u251c\u2500\u2500 Domain.csproj\n    \u251c\u2500\u2500 Infrastructure\n    \u2502\xa0\xa0 \u251c\u2500\u2500 Infrastructure.csproj\n    \u251c\u2500\u2500 WebApi\n    \u2502\xa0\xa0 \u251c\u2500\u2500 Controllers\n    \u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 WeatherForecastController.cs\n    \u2502\xa0\xa0 \u251c\u2500\u2500 Program.cs\n    \u2502\xa0\xa0 \u251c\u2500\u2500 Properties\n    \u2502\xa0\xa0 \u2502\xa0\xa0 \u2514\u2500\u2500 launchSettings.json\n    \u2502\xa0\xa0 \u251c\u2500\u2500 Startup.cs\n    \u2502\xa0\xa0 \u251c\u2500\u2500 WeatherForecast.cs\n    \u2502\xa0\xa0 \u251c\u2500\u2500 WebApi.csproj\n    \u2502\xa0\xa0 \u251c\u2500\u2500 appsettings.Development.json\n    \u2502\xa0\xa0 \u251c\u2500\u2500 appsettings.json\n    \u2514\u2500\u2500 WebSite\n        \u251c\u2500\u2500 Pages\n        \u2502\xa0\xa0 \u251c\u2500\u2500 Index.cshtml\n        \u2502\xa0\xa0 \u251c\u2500\u2500 Index.cshtml.cs\n        \u2502\xa0\xa0 (\u7565...)\n        \u251c\u2500\u2500 Program.cs\n        \u251c\u2500\u2500 Properties\n        \u2502\xa0\xa0 \u2514\u2500\u2500 launchSettings.json\n        \u251c\u2500\u2500 Startup.cs\n        \u251c\u2500\u2500 WebSite.csproj\n        \u251c\u2500\u2500 appsettings.Development.json\n        \u251c\u2500\u2500 appsettings.json\n        \u2514\u2500\u2500 wwwroot\n            \u251c\u2500\u2500 css\n            (\u7565...)\n")),Object(c.b)("p",null,"\u3067\u304d\u308c\u3070\u5171\u901a\u3067\u547c\u3073\u51fa\u3059",Object(c.b)("inlineCode",{parentName:"p"},"Infrastructure"),"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u76f4\u4e0b\u306b\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002"),Object(c.b)("p",null,"\u3057\u304b\u3057\u4f5c\u6210\u3057\u3066\u3044\u305f\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u69cb\u6210\u3067\u306f",Object(c.b)("inlineCode",{parentName:"p"},"Infrastructure"),"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u30af\u30e9\u30b9\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3057\u305f\u3002"),Object(c.b)("p",null,"\u305d\u306e\u305f\u3081\u3001",Object(c.b)("inlineCode",{parentName:"p"},"Infrastructure"),"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u76f4\u4e0b\u3067",Object(c.b)("inlineCode",{parentName:"p"},"dotnet ef migrations"),"\u30b3\u30de\u30f3\u30c9\u3092\u3046\u3063\u3066\u3082\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3067\u304d\u307e\u305b\u3093\u3002"),Object(c.b)("p",null,"\u305d\u3053\u3067",Object(c.b)("inlineCode",{parentName:"p"},"Infrastructure"),"\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30af\u30e9\u30b9\u30e9\u30a4\u30d6\u30e9\u30ea\u304b\u3089\u30b3\u30f3\u30bd\u30fc\u30eb\u30a2\u30d7\u30ea\u306b\u5909\u3048\u3066\u3057\u307e\u3063\u3066\u3001DI \u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3067\u304d\u308b\u7528\u306b\u5909\u66f4\u3057\u307e\u3059\u3002"))}h.isMDXComponent=!0},108:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return d}));var n=a(0),r=a.n(n);function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=r.a.createContext({}),h=function(e){var t=r.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=h(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},s=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,c=e.originalType,b=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),p=h(a),s=n,d=p["".concat(b,".").concat(s)]||p[s]||m[s]||c;return a?r.a.createElement(d,i(i({ref:t},l),{},{components:a})):r.a.createElement(d,i({ref:t},l))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var c=a.length,b=new Array(c);b[0]=s;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i.mdxType="string"==typeof e?e:n,b[1]=i;for(var l=2;l<c;l++)b[l]=a[l];return r.a.createElement.apply(null,b)}return r.a.createElement.apply(null,a)}s.displayName="MDXCreateElement"}}]);